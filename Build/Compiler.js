"use strict";var _prototypeProperties=function(e,i,r){i&&Object.defineProperties(e,i),r&&Object.defineProperties(e.prototype,r)},_classCallCheck=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},Promise=require("a-promise"),FS=require("fs"),H=require("./H"),Compiler=function(){function e(){_classCallCheck(this,e);var i=require("./Plugins/Compiler-JS"),r=require("./Plugins/Compiler-Coffee"),t=require("./Plugins/Compiler-LESS"),o=require("./Plugins/Compiler-CSS");i.init(this),r.init(this),t.init(this),o.init(this),this.Map={JS:{Compiler:i,Opts:{Compiler:"Babel",Shebang:null}},JSX:{Compiler:i,Opts:{Compiler:"Babel",Shebang:null}},TAG:{Compiler:i,Opts:{Compiler:"Riot",Shebang:null}},COFFEE:{Compiler:r,Opts:{Shebang:null}},LESS:{Compiler:t,Opts:{}},CSS:{Compiler:o,Opts:{}}}}return _prototypeProperties(e,null,{Compile:{value:function(e,i,r){return new Promise(function(t,o){FS.exists(e,function(n){if(!n)return o("Source file "+e+" doesn't exist");var l=e.split(".").pop().toUpperCase(),p=H.Clone(this.Map[l].Opts);return p.TargetFile=i||null,p.SourceMap=r||null,this.Map.hasOwnProperty(l)?void this.Map[l].Compiler.Process(e,p).then(function(e){return p=e.Opts,p.TargetFile?void FS.writeFile(p.TargetFile,e.Content,function(i){return i?o(i):void(p.SourceMap?FS.writeFile(p.SourceMap,e.SourceMap,t):t())}):t(e)},o):o("The given file type is not recognized")}.bind(this))}.bind(this))},writable:!0,configurable:!0}}),e}();module.exports=Compiler;